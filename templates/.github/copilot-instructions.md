# 汎用的な開発ガイドライン

このファイルは、AI アシスタントに対する汎用的な開発ガイドラインを提供します。

**重要**: プロジェクト固有の指示については `.github/local-instruction.md` を参照してください。

## 言語設定とコミュニケーション (Language & Communication)

**【基本原則】**
私は日本人の開発者です。**AIからの回答、解説、質問は、いかなる場合も必ず「日本語」で行ってください。**

### 1. 人間が読む部分（日本語を使用）
* **チャットの回答:** 解説、提案、質問への回答はすべて日本語で行う。
* **開発文書:** README、設計書、仕様書などは日本語で記述する。
* **コード内のコメント:** Docstring、行コメント、TODOコメントは日本語で記述する。

### 2. 機械が処理する部分（英語/ASCIIを使用）
* **コードシンボル:** 変数名、関数名、クラス名、ファイル名は英語で記述する。
* **ログ・出力メッセージ:** * 端末（stdout/stderr）やログファイルへの出力は、文字化けを防ぐため可能な限り **英語（ASCII）** を使用する。
    * ただし、エンドユーザー（GUIなど）向けの表示メッセージはこの限りではない。

## コーディング原則

### 1. コードの品質
- 可読性を最優先する
- DRY (Don't Repeat Yourself) 原則を守る
- 適切なコメントとドキュメントを記述

### 2. セキュリティ
- 機密情報をハードコードしない
- 環境変数を使用して設定を管理
- 入力値の検証を徹底

### 3. エラーハンドリング
- 適切なエラーメッセージを提供
- 例外を適切にキャッチして処理
- ログに十分な情報を含める

### 4. テスト
- 重要な機能にはテストを記述
- エッジケースを考慮
- テストの保守性を確保

## Git ワークフロー

### コミットメッセージ (Conventional Commits)

このプロジェクトでは **Conventional Commits** 形式を厳守してください。

#### 基本フォーマット

```
<type>: <description>

[optional body]

[optional footer]
```

#### Type（種類）

| Type | 説明 | バージョン影響 |
|:---|:---|:---|
| `feat:` | 新機能の追加 | Minor アップ |
| `fix:` | バグ修正 | Patch アップ |
| `docs:` | ドキュメントのみの変更 | なし |
| `style:` | コードの意味に影響しない変更（空白、フォーマットなど） | なし |
| `refactor:` | バグ修正や機能追加を含まないコード変更 | なし |
| `perf:` | パフォーマンス改善 | Patch アップ |
| `test:` | テストの追加や修正 | なし |
| `chore:` | ビルドプロセスや補助ツールの変更 | なし |
| `ci:` | CI設定ファイルやスクリプトの変更 | なし |

#### 破壊的変更

破壊的変更を含む場合は、フッターに `BREAKING CHANGE:` を記載するか、
type の後に `!` を付ける（例: `feat!:`, `fix!:`）。これにより Major バージョンが上がります。

#### 例

```
feat: ユーザー認証機能を追加

JWT トークンベースの認証システムを実装しました。

Closes #123
```

```
fix: ログイン時のセッションタイムアウトを修正
```

```
feat!: API エンドポイントの構造を変更

BREAKING CHANGE: /api/v1/users から /api/v2/users に変更
```

### ブランチ戦略
- main ブランチは常にデプロイ可能な状態に保つ
- 機能開発は feature ブランチで行う
- PR（Pull Request）ベースでの開発を推奨

### CI スキップ

ドキュメントのみの変更や軽微な修正の場合は、コミットメッセージに `[skip ci]` または `[ci skip]` を含めることで、GitHub Actions の実行をスキップできます。例：

```bash
git commit -m "docs: update template [skip ci]"
```

## ドキュメンテーション

### README
- プロジェクトの概要を明確に記述
- セットアップ手順を詳細に説明
- 使用方法の例を提供

### コメント
- 「なぜ」を説明する（「何を」ではなく）
- 複雑なロジックには説明を追加
- TODO コメントには期限や担当者を記載

## UI/UXデザイン哲学：機能的没入感

- 禁止事項: 雰囲気作りだけの無意味な英語の羅列、実際の処理と連動しない嘘のロード演出、過剰なアニメーション。
- 推奨事項: システムの内部状態を正確に可視化することで生まれる没入感。
- 例: 処理の進捗を正確に示すプログレスバー、リアルタイムで流れる処理ログ、操作に即応するスナップな反応。
- 指針: 「待機時間を演出で誤魔化す」のではなく、「現在何が起きているか（Status）」をユーザーに誠実に伝えるデザインを採用する。

## Development Workflow

- 我々の開発フローは「Continuous Deployment」です。
- PRがmainにマージされると、コミットメッセージに基づいて自動的にリリースされます。
- そのため、コミットメッセージのプレフィックス(`feat:`, `fix:`)は厳密に正確である必要があります。
- 大きな変更を行う際は、必ずPRの本文またはコミットフッターに `BREAKING CHANGE: 詳細` を含めてください。
