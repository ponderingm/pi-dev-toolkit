# プロジェクト固有の指示書（テンプレート）

このファイルは、新規プロジェクトで使用するプロジェクト固有の開発ルールのテンプレートです。

## 環境

| 環境       | プラットフォーム   | 説明                                 |
|------------|--------------------|------------------------------------|
| ローカル   | Docker Compose     | ローカル PC での開発                 |
| 本番       | Coolify on Pi4     | Raspberry Pi 4 (ARM64) にデプロイ   |

## 開発ルール

### 1. ビルド設定

- **Dockerfile を手動で書かない** - Nixpacks による自動ビルド検出に依存する
- 必要に応じて `nixpacks.toml` で Nixpacks 設定をカスタマイズ可能
- Coolify がビルドとデプロイプロセスを自動的に処理

### 2. データ永続化

- 永続データには**必ず Docker ボリュームを使用**する
- コンテナのファイルシステム内に永続データを保存しない
- ローカル開発用に `compose.yaml` でボリュームを定義

### 3. ロギング

- **すべてのログを stdout に出力** - ログファイルに書き込まない
- 可能な限り構造化ログ（JSON 形式）を使用
- Coolify と Docker が自動的に stdout/stderr をキャプチャ

- 本番環境では Coolify ダッシュボードで環境変数を設定


┌─────────────────┐     Git Push     ┌─────────────────┐
                                              │
                                              │ Webhook
                                              ▼
                                     ┌─────────────────┐
                                     │  Raspberry Pi 4 │
                                     │    (Coolify)    │
                                     └────────┬────────┘
                                              │
                                              │ Tailscale
                                              ▼
                                     ┌─────────────────┐
                                     │  メッシュネットワーク │
                                     │   (プライベート)   │
                                     └─────────────────┘
```

## 技術スタック

- **コンテナ化**: Docker / Docker Compose
- **ビルドツール**: Nixpacks
- **デプロイメント**: Coolify
- **ネットワーク**: Tailscale

### CI スキップ

ドキュメントのみの変更や軽微な修正の場合は、コミットメッセージに `[skip ci]` または `[ci skip]` を含めることで、GitHub Actions の実行をスキップできます。

- 手動設定より規約を優先する
# Template: local-instruction
このテンプレートファイルは最小限の参照を含みます。実際の運用ルールや詳細はリポジトリの本体にある `../../.github/local-instruction.md` を参照してください。
テンプレートを使って新規プロジェクトを作成する際は、必ず `../.github/local-instruction.md` の内容を確認し、必要に応じてカスタマイズしてください。
## 技術スタック
